# Create project and initial changes

I originally created the WebApp project by choosing the template for: C# Web App -> ASP.NET 5 -> authentication = "Individual User Accounts"

I then changed the generated registration and login code to incorporate the improved features outlined in the video:
	"ASP.NET Identity 3 for ASP.NET CORE - by Brock Allen", who is the creator of Identity Manager

I modified the Home Controller and Views. I removed the sample content and inserted the content for Govmeeting.

I added the Meeting, Transcript and AddTags controllers for handling WebApi request for Govmeeting data.

# Merge BrowserApp and WebApp

I left the code for the client side app in its own seperate "BrowserApp" project.
I added tooling for copying the production "dev" folder into WebApp's "wwwroot" folder, whenever the production code is rebuilt in that project.

I changed WebApp's navigation bar to combine the server functions (register, login, manage) with those of
the browser app (view meeting data, edit transcripts, etc).
See Views/Shared/_Layout.cshtml


# An Identity Manager

I needed a solution for managing users and their permissions. 
 The Manage controller and views, which are generated by the template, are for the users to manage their personal information.
 They are not for an administrator to manage users.

I tried to incorporate Microsoft Identity Manager.
 I got it working in an ASP.NET 4.5.2 app. 
 But I needed to manage identities for my ASP 5 app (which is now "ASP.NET Core).
 This requires using ASP.NET Identity 3. Identity Manager does not yet support version 3.
 There are many changes in the new version of Microsoft Identity.
 For example, the table layout for dbo.AspNetUsers has changed.
  
Therefore I wrote my own identity management functions. I based it on the newer claims based identity instead of roles. 
I added the Admin controller and views for adding and deleting users and managing their authorization claims.

# Upgrade to ASP.NET Core 1

I started adding functionality for sending emails.
 I started to run into issues with incompatable libraries between ASP.NET 5 and Core 1. (the RC1 to RC2 upgrade)
 I decided to upgrade all the code to ASP.NET Core 1.

I had two possible approaches.
* Read the documentation on all the changes needed to upgrade (non-trivial)
The majority of the referenced Microsoft DLLs are new
* Regenerate the template using the newer ASP.NET templates for Core 1.

ASP.NET 5 is now renamed ASP.NET Core. There were also many changes made in the new version. .
This includes not only those changed from "Microsoft.ASPNET.xxx" to "Microsoft.Asp.NetCore.xxx but most of the others.
I could go through a step by step guide for upgrading my code to the new release. But it may be much easier to do it this way:
* Re-generate the project with the new Asp.Net Core template
* Replace code that shouldn't be effected by the upgrade (models, views, controllers) with my own.

I regenerated template and did a file comparison.
 Besides the references to the new DLLs, the majority of the changes are in startup.cs and the addition of the newer program.cs.

I merged my changes to startup.cs with the changes made for the ASP.NET Core template.
I merged the few minor changes to the other source files.
I copied over all my new source files to the new project, changing "using" statements for the newer DLL's.

Note that we are using ASP.NET Core and Entity Framework Core but we are still using .NET Framework 4.5.2.
I was using Visual Studio 2013 and the only choices in the framework combo box were for .NET 4.x versions.
VS2015 has choices for .NET Framework Core. So I will wait till I am using 2015 before switching. 


# BrowserApp asset files

There had been asset files from the BrowserApp in wwwrooot/assets. These are data files for testing.
These dissappeared when I re-created the project. I copied the assets folder back over.
This contained:
* svg\more.svg
* BoothbayHarbor_Selectmen_2014-09-08.json
* data.json
* Philadelphia_CityCouncil_2014-09-25.json
* Philadelphia_CityCouncil_2016-03-17.json
* talks.json
* topics.json



